<!DOCTYPE html>
<html>
<head>
  <title>User Profile</title>
</head>
<body>

<h1 id="username"></h1>
<p id="joined"></p>

<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<script>
const supabase = window.supabase.createClient(
  "https://opixidygpndbfuisjkrk.supabase.co",
  "sb_publishable_N6RdTgjgUHQbdtvPX9uPqA_VTraUegI"
);

const params = new URLSearchParams(window.location.search);
const username = params.get("user");

async function loadProfile() {
  const { data, error } = await supabase
    .from("profiles")
    .select("*")
    .eq("username", username)
    .single();

  if (error || !data) {
    document.body.innerHTML = "<h1>User not found</h1>";
    return;
  }

  document.getElementById("username").innerText = "@" + data.username;
  document.getElementById("joined").innerText =
    "Joined: " + new Date(data.created_at).toLocaleDateString();
}

loadProfile();
</script>

</body>
</html>
